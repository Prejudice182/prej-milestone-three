{% extends 'base.html'%}
{% macro render_card(entry) -%}
<div class="col-lg-6 col-xl-4">
    <div class="card">
        <img class="responsive-img" src="{{ entry.Poster }}" alt="Poster for {{ entry.Title }}">
        <div class="card-content">
            <p>{{ entry.Plot }}</p>{{ caller() }}
        </div>
        <div class="card-footer">
            <div class="row">
                <div class="col-sm-4">
                    <a href="{{ url_for('favs_bp.edit_fav', entry_id=entry._id) }}">EDIT</a>
                </div>
                <div class="col-sm-4">
                    <a href="{{ url_for('favs_bp.view_fav', entry_id=entry._id) }}">VIEW</a>
                </div>
                <div class="col-sm-4">
                    <button data-toggle="modal" data-target="#deleteModal{{ entry._id }}" class="btn">DELETE</button>
                </div>
            </div>
        </div>
        <div class="modal" id="deleteModal{{ entry._id }}" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel{{ entry._id }}" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="deleteModalLabel{{ entry._id }}"></h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h5>Are you sure you want to delete:</h5>
                        <p>Title: {{ entry.Title }}</p>
                        <p>Added By: {{ entry.AddedBy }}</p>
                        <p>Reason: {{ entry.Reason }}</p>
                    </div>
                    <div class="modal-footer">
                        <form action="{{ url_for('favs_bp.delete_fav', entry_id=entry._id) }}" method="post">
                            <input type="hidden" name="entry_type" value="{{ entry.Type }}">
                            <input type="submit" value="DELETE">
                        </form>
                        <a href="#!" class="modal-close">CANCEL</a>
                        <button type="button" class="btn" data-dismiss="modal">CLOSE</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{%- endmacro %}
{% block content %}
<h1>View All {{ title }}</h1>
<div class="row">
    {% for entry in entries %}
    {% call render_card(entry) %} {% endcall %}
    {% else %}
    <h4>No {{ title }}s found!</h4>
    {% endfor %}
</div>
{% endblock %}